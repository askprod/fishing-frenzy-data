<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
  <div class="flex p-4 border-1 border-gray-200 rounded-xl flex-col md:flex-1 px-4">
    <p class="flex gap-2 justify-between items-center mb-4">
      <span class="text-sm mt-[1px]">Info</span>
    </p>
    <div class="flex flex-col gap-2">
      <div class="flex text-xxs items-center justify-between">
        <span class="mt-[2px] pl-2">Price</span>
        <span class="flex-1 h-px bg-gray-100 mx-4"></span>
        <span class="<%= label_classes(color: "yellow") %>">
          <%= image_tag("/images/icons/gold_icon.png", class: "h-[7px] mt-[-1px] mr-1") %>
          <%= number_with_delimiter(fish.sell_price) %>
        </span>
      </div>
      <div class="flex text-xxs items-center justify-between">
        <span class="mt-[2px] pl-2">Catch Difficulty</span>
        <span class="flex-1 h-px bg-gray-100 mx-4"></span>
        <div class="flex items-center gap-2">
          <div class="relative text-gray-300">
            <div class="text-xs flex">★★★★★</div>
            <div class="text-xs absolute top-0 left-0 overflow-hidden text-yellow-400" style="width: <%= fish.catch_difficulty_percentage %>%;">★★★★★</div>
          </div>
          <div class="relative">
            <svg class="h-[10px] fill-gray-400 peer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm169.8-90.7c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/>
            </svg>
            <div class="absolute left-1/2 top-full mt-2 w-64 -translate-x-1/2 rounded-lg bg-gray-900 px-3 py-2 text-xxs text-white shadow-md opacity-0 transition-opacity duration-300 peer-hover:opacity-100">
              Catch difficulty ranked relative to all fish in the game—the more yellow stars, the harder the catch!
            </div>
          </div>
        </div>
      </div>
      <div class="flex text-xxs items-center justify-between">
        <span class="mt-[2px] pl-2">Unlock</span>
        <span class="flex-1 h-px bg-gray-100 mx-4"></span>
        <span class="<%= label_classes(color: "blue") %>">
          Lvl. <%= fish.unlock_level %>
        </span>
      </div>
      <div class="flex text-xxs items-center justify-between">
        <span class="mt-[2px] pl-2">Exp. Gain</span>
        <span class="flex-1 h-px bg-gray-100 mx-4"></span>
        <span class="<%= label_classes(color: "red") %>">
          +<%= number_with_delimiter(fish.exp_gain) %>
        </span>
      </div>
      <% if fish.event_attributes %>
        <div class="flex text-xxs items-center justify-between">
          <span class="mt-[2px] pl-2">Event Properties</span>
          <span class="flex-1 h-px bg-gray-100 mx-4"></span>
          <%= event_attributes_label(fish.event_attributes) %>
        </div>
      <% end %>
    </div>
  </div>
  <div class="flex p-4 border-1 border-gray-200 rounded-xl flex-col md:flex-1 px-4">
    <p class="flex gap-2 justify-between items-center mb-4">
      <span class="text-sm mt-[1px]">Associations</span>
    </p>
    <div class="flex flex-col gap-2">
      <div class="flex text-xxs items-center justify-between">
        <span class="mt-[2px]">Recipes</span>
        <span class="flex-1 h-px bg-gray-100 mx-4"></span>
        <span class="<%= label_classes(color: "gray") %>">
          <%= fish.cooking_recipes.count %>
        </span>
      </div>
      <% fish.cooking_recipes.each do |recipe| %>
        <div class="flex text-xxs items-center justify-between">
          <span class="flex-1 h-px bg-gray-100 mx-4"></span>
          <%= link_to recipe_path(recipe.slug), class: "text-xxs text-blue-400 px-1.5 py-0.5" do %>
            <span class="flex">
              <%= recipe.name %>
              <svg class="fill-blue-400 ml-1 h-[8px]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                <path d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z"/>
              </svg>
            </span>
          <% end %>
        </div>
      <% end %>
      <% unless fish.event.is_default_event? %>
        <div class="flex text-xxs items-center justify-between">
          <span class="mt-[2px]">Event</span>
          <span class="flex-1 h-px bg-gray-100 mx-4"></span>
          <%= link_to event_path(fish.event.slug), class: "text-xxs text-blue-400 px-1.5 py-0.5" do %>
            <span class="flex">
              <%= fish.event.name %>
              <svg class="fill-blue-400 ml-1 h-[8px]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                <path d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z"/>
              </svg>
            </span>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
  <% if fish.has_nft? %>
    <div class="flex p-4 border-1 border-gray-200 rounded-xl flex-col md:flex-1 px-4">
      <p class="flex gap-2 flex-col mb-4">
        <span class="text-sm mt-[1px]">Statistics</span>
        <% if @fish.latest_statistic %>
          <span class="text-gray-400 text-xxs">last updated <%= time_ago_in_words(@fish.latest_statistic.reference_date) %> ago</span>
        <% end %>
      </p>
      <div class="flex flex-col gap-2">
        <% if @aggregated_stats.any? %>
          <% @aggregated_stats.keys.each do |stat_name| %>     
            <div class="flex text-xxs items-center justify-between">
              <span class="mt-[2px]"><%= human_stat_name(stat_name) %></span>
              <span class="flex-1 h-px bg-gray-100 mx-4"></span>
              <span class="<%= label_classes(color: "blue") %>">
                Current <%= @fish.latest_statistic.data.dig(stat_name) %>
              </span>
            </div>   
            <% @aggregated_stats[stat_name].each do |timeframe, percentage| %>
              <div class="flex text-xxs items-center justify-between">
                <span class="ml-2 mt-[2px]"><%= timeframe %></span>
                <span class="flex-1 h-px bg-gray-100 mx-4"></span>
                <span class="<%= percentage_color(percentage) %>">
                  <%= percentage_suffix(percentage) %><%= percentage.presence %>%
                </span>
              </div>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>